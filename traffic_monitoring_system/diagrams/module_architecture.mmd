flowchart LR
    classDef mainNode fill:#F44336,stroke:#C62828,color:#fff,stroke-width:3px,font-weight:bold,font-size:16px
    classDef inputMod fill:#4CAF50,stroke:#2E7D32,color:#fff,stroke-width:2px
    classDef coreMod fill:#2196F3,stroke:#1565C0,color:#fff,stroke-width:2px
    classDef analysisMod fill:#FF9800,stroke:#E65100,color:#fff,stroke-width:2px
    classDef outputMod fill:#9C27B0,stroke:#6A1B9A,color:#fff,stroke-width:2px
    classDef configMod fill:#607D8B,stroke:#37474F,color:#fff,stroke-width:2px
    classDef dataMod fill:#00BCD4,stroke:#00838F,color:#fff,stroke-width:2px

    MAIN["ðŸŽ¯ main.py\nTrafficMonitoringSystem\nOrchestrator"]:::mainNode

    subgraph INPUT ["ðŸ“¥ INPUT LAYER"]
        direction TB
        VI["video_input.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Video File\nâ€¢ Webcam\nâ€¢ RTSP Stream\nâ€¢ FPS Control\nâ€¢ Frame Resize"]:::inputMod
    end

    subgraph DETECTION ["ðŸ” DETECTION LAYER"]
        direction TB
        VD["vehicle_detector.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ YOLOv8 Model\nâ€¢ Car / Bike / Bus / Truck\nâ€¢ Confidence Scoring\nâ€¢ Vehicle Counting\nâ€¢ Region Cropping"]:::coreMod
        PD["plate_detector.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Contour Detection\nâ€¢ Morphological Ops\nâ€¢ Aspect Ratio Filter\nâ€¢ Plate Preprocessing\nâ€¢ Noise Handling"]:::coreMod
        OR["ocr_reader.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ EasyOCR Engine\nâ€¢ Text Cleaning\nâ€¢ Plate Validation\nâ€¢ Misread Correction\nâ€¢ Confidence Score"]:::coreMod
    end

    subgraph ANALYSIS ["ðŸ“Š ANALYSIS LAYER"]
        direction TB
        CD["color_detector.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ HSV Color Space\nâ€¢ K-Means Clustering\nâ€¢ 10 Color Classes\nâ€¢ Center Sampling\nâ€¢ Dominant Color"]:::analysisMod
        VLD["violation_detector.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Wrong Way\nâ€¢ Lane Violation\nâ€¢ Red Light\nâ€¢ Custom Rules\nâ€¢ Motion Analysis"]:::analysisMod
        TR["tracker.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ SORT Algorithm\nâ€¢ Kalman Filter\nâ€¢ Hungarian Match\nâ€¢ Persistent IDs\nâ€¢ Duplicate Prevention"]:::analysisMod
    end

    subgraph OUTPUT ["ðŸ“¤ OUTPUT LAYER"]
        direction TB
        CSV["csv_logger.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Auto CSV Creation\nâ€¢ Duplicate Check\nâ€¢ Thread-Safe\nâ€¢ Auto Serial No.\nâ€¢ Append Mode"]:::outputMod
        DB["dashboard.py\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Bounding Boxes\nâ€¢ Plate Labels\nâ€¢ Violation Alerts\nâ€¢ Vehicle Counts\nâ€¢ FPS Display"]:::outputMod
    end

    subgraph CONFIG ["âš™ï¸ CONFIGURATION"]
        direction TB
        SC["system_config.json\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Model Settings\nâ€¢ Thresholds\nâ€¢ I/O Paths"]:::configMod
        VR["violation_rules.json\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Rule Definitions\nâ€¢ Zone Boundaries\nâ€¢ Custom Rules"]:::configMod
    end

    VI --> MAIN
    MAIN --> VD
    VD --> TR
    TR --> PD
    PD --> OR
    MAIN --> CD
    MAIN --> VLD
    VLD --> CSV
    OR --> CSV
    MAIN --> DB
    CONFIG --> MAIN
